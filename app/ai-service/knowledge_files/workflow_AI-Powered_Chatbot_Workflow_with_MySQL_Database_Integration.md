# AI-Powered Chatbot Workflow with MySQL Database Integration

**[View Template](https://n8n.io/workflows/2985-/)**  **Published Date:** 02/23/2025  **Created By:** Gegenfeld  **Categories:** `AI` `Langchain`  

## Template Description

AI-Powered Chatbot Workflow with MySQL Integration

This guide shows you how to deploy a chatbot that lets you query your database using natural language. You will build a system that accepts chat messages, retains conversation history, constructs dynamic SQL queries, and returns responses generated by an AI model. By following these instructions, you will have a working solution that integrates n8nâ€™s AI Agent capabilities with MySQL.

Prerequisites

Before you begin, ensure that you have the following:

An active n8n instance (self-hosted or cloud) running version 1.50.0 or later.
Valid MySQL credentials configured in n8n.
API credentials for the Groq Chat Model (or your preferred AI language model).
Basic familiarity with SQL and n8n node concepts such as chat triggers and memory buffers.
Access to the n8n Docs on AI Agents for further reference.

Workflow Setup

1. Chat Interface & Trigger

When Chat Message Received**  
  This node listens for incoming chat messages via a webhook. When a message arrives, it triggers the workflow immediately.

2. Conversation Memory

Chat History**  
  This memory buffer node stores the last 10 interactions. It supplies conversation context to the AI Agent, ensuring that responses consider previous messages.

3. AI Agent Core

AI Agent (Tools Agent)**  
  The AI Agent node orchestrates the conversation by receiving the chat input and conversation history. It dynamically generates SQL queries based on your requests and coordinates calls to external tools (such as MySQL nodes).

4. Database Interactions

MySQL Node**  
  This node executes the SQL query generated by the AI Agent. You reference the query using an expression (e.g., {{$node["AI Agent"].json.sql_query}}), allowing the agentâ€™s output to control data retrieval.

MySQL Schema Node**  
  This node retrieves a list of base tables from your MySQL database (excluding system schemas). The agent uses this information to understand the available tables.

MySQL Definition Node**  
  This node fetches detailed metadata (such as column names, data types, and relationships) for a specific table. The table and schema names are supplied dynamically by the AI Agent.

5. Language Model Processing

Groq Chat Model**  
  This node connects to the Groq Chat API to generate text completions. It processes the combined input (chat message, context, and data fetched from MySQL) and produces the final response.

6. Guidance & Customization

Sticky Notes**  
  These nodes provide guidance on:
  Switching the chat model if you wish to use another provider (e.g., OpenAI or Anthropic).
  Adjusting the maximum token count per interaction.
  Customizing the SQL queries and the context window size.
  
They help you modify the workflow to suit your environment and requirements.

Workflow Connections

The Chat Trigger passes the incoming message to the AI Agent.
The Chat History node supplies conversation context to the AI Agent.
The AI Agent calls the MySQL nodes as external tools, generating and sending dynamic SQL queries.
The Groq Chat Model processes the consolidated input from the agent and outputs the natural language response delivered to the user.

Testing the Workflow

Send a chat message using the chat interface.
Observe how the AI Agent processes the input and generates a corresponding SQL query.
Verify that the MySQL nodes execute the query and return data.
Confirm that the Groq Chat Model produces a coherent natural language response.
Refer to the sticky notes for guidance if you need to fine-tune any node settings.

Next Steps and References

Customize Your AI Model**  
  Replace the Groq Chat Model with another language model (such as the OpenAI Chat Model) by updating the node credentials and configuration.

Enhance Memory Settings**  
  Adjust the Chat History nodeâ€™s context window to retain more or fewer messages based on your needs.

Modify SQL Queries**  
  Update the SQL queries in the MySQL nodes to match your specific database schema and desired data.

Further Reading**  
  Consult the n8n Docs on AI Agents for additional details and examples to expand your workflowâ€™s capabilities.

Set Up a Website Chatbot**
  Copy & Paste and replace the placeholders in the following code to embed the chatbot into your personal or company's website: View in CodePen ðŸ¡¥

By following these steps, you will deploy a robust AI chatbot workflow that integrates with your MySQL database, allowing you to query data using natural language.


## Template JSON

```
{
  "meta": {
    "instanceId": "f0daacbbece4d36ce73ed214e506ba3899410c0e00a1b6cd1d93e012465d1082"
  },
  "nodes": [
    {
      "id": "e1055031-f1f1-44dd-8e3b-18b9f543aac2",
      "name": "When chat message received",
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "position": [
        -60,
        -80
      ],
      "webhookId": "cf1de04f-3e38-426c-89f0-3bdb110a5dcf",
      "parameters": {},
      "typeVersion": 1.1
    },
    {
      "id": "88eaaf60-aed6-4e9d-9667-d2838a8e7f78",
      "name": "Chat History",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "position": [
        280,
        120
      ],
      "parameters": {},
      "typeVersion": 1.3
    },
    {
      "id": "a5b49dee-d5e4-4324-a7f8-1638e4e41abd",
      "name": "MySQL",
      "type": "n8n-nodes-base.mySqlTool",
      "position": [
        460,
        120
      ],
      "parameters": {},
      "typeVersion": 2.4
    },
    {
      "id": "7abfcdc7-dfc5-4627-a479-82dd38404c88",
      "name": "MySQL Schema",
      "type": "n8n-nodes-base.mySqlTool",
      "position": [
        640,
        120
      ],
      "parameters": {},
      "typeVersion": 2.4
    },
    {
      "id": "bc9dfb90-0696-4801-a5c2-741c2fd27855",
      "name": "MySQL Definition",
      "type": "n8n-nodes-base.mySqlTool",
      "position": [
        820,
        120
      ],
      "parameters": {},
      "typeVersion": 2.4
    },
    {
      "id": "fd8344a4-ee89-4365-ae36-cc39f26c47df",
      "name": "AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        360,
        -80
      ],
      "parameters": {},
      "typeVersion": 1.7
    },
    {
      "id": "4849ec08-2ab9-46f2-bc8c-f9dad3196246",
      "name": "Groq Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatGroq",
      "position": [
        100,
        120
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "400a5f98-60af-4acb-950a-085402f3502d",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        60,
        300
      ],
      "parameters": {
        "content": ""
      },
      "typeVersion": 1
    },
    {
      "id": "5859cd82-9d6c-4783-8ef9-44cd4d800148",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        240,
        300
      ],
      "parameters": {
        "content": ""
      },
      "typeVersion": 1
    },
    {
      "id": "599c02ac-7246-4cab-8bdd-1f6565ece04d",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        420,
        300
      ],
      "parameters": {
        "content": ""
      },
      "typeVersion": 1
    },
    {
      "id": "33cbfb73-10e5-428b-ba71-539be16e7bc7",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -60,
        -300
      ],
      "parameters": {
        "content": ""
      },
      "typeVersion": 1
    }
  ],
  "pinData": {},
  "connections": {
    "MySQL": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Chat History": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "MySQL Schema": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Groq Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "MySQL Definition": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}
```
