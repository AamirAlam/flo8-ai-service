# Complete Guide to Setting Up and Generating TOTP Codes in n8n üîê

**[View Template](https://n8n.io/workflows/2696-/)**  **Published Date:** 01/04/2025  **Created By:** AmirHossein MnasouriZade  **Categories:**   

## Template Description

Setting Up and Generating TOTP

Step 1: Receive QR Code and Extract the Link

1. Receive the QR Code from the 2FA service
After enabling two-factor authentication (2FA) on services like OpenAI, Google, GitHub, etc., a QR Code will be given to you, which you need to scan. This QR Code contains the TOTP link used to generate one-time passcodes.

2. Extract the link from the received QR Code
To extract the link from the QR Code, use online tools. These tools will help you extract the corresponding link.

After using an online tool, the extracted link will appear in the following format:

otpauth://totp/ServiceName:username?secret=secret_key&issuer=ServiceName
For example:
otpauth://totp/OpenAI:amir676080@gmail.com?secret=test-test-test&issuer=OpenAI

Step 2: Create TOTP Credential in n8n

Create a new Credential
To use TOTP in n8n, you need to create a new TOTP Credential.

Enter the details in the Credential
In the Secret field:* Enter the *secret key** (extracted from the QR Code link). 
For example:
 test-test-test

In the Label field:* Enter *ServiceName:username** 
For example:
OpenAI:amir676080@gmail.com




Save the Credential
After entering the information, click Save to save the Credential.

Step 3: Get the TOTP Code
Click on Test Workflow
After setting up the credentials in n8n, click on Test, and the corresponding code will be delivered to you.

Output:
[
  {
    "token": "720769",
    "secondsRemaining": 18
  }
]



==This code is exactly the same as the one generated by apps and services like Google Authenticator or Authy. üîê==


Contact me on [Telegram]: https://t.me/amir676080



## Template JSON

```
{
  "id": "0wfomsVO0TQtQkwU",
  "meta": {
    "instanceId": "2e75c9fb3cdcf631da470c0180f0739986baa0ee860de53281e9edc3491b82a3"
  },
  "name": "Complete Guide to Setting Up and Generating TOTP Codes in n8n \ud83d\udd10",
  "tags": [],
  "nodes": [
    {
      "id": "0fe95b9a-be2b-4022-829e-8b6c801e5baf",
      "name": "When clicking \u2018Test workflow\u2019",
      "type": "n8n-nodes-base.manualTrigger",
      "position": [
        -280,
        -340
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "02fee6b5-7770-4889-b9bb-89bface8872d",
      "name": "TOTP",
      "type": "n8n-nodes-base.totp",
      "position": [
        -40,
        -340
      ],
      "parameters": {
        "options": {}
      },
      "credentials": {
        "totpApi": {
          "id": "9487Zco8UqMQWnpf",
          "name": "TOTP account Mars55"
        }
      },
      "typeVersion": 1
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "timezone": "Asia/Tehran",
    "callerPolicy": "workflowsFromSameOwner",
    "executionOrder": "v1"
  },
  "versionId": "d7a5fff3-3fcd-45cd-ba06-564097567ff5",
  "connections": {
    "When clicking \u2018Test workflow\u2019": {
      "main": [
        [
          {
            "node": "TOTP",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}
```
